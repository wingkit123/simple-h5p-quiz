/* Base layout overrides */
#root {  
  max-width: 1200px;  
  margin: 0 auto;  
  padding: 2rem 1.5rem 4rem;  
  text-align: left;  
}

body {  
  background: linear-gradient(135deg,#1f1f24 0%, #2b2d33 60%, #202226 100%);  
  color: #f5f7fa;  
  font-family: system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,'Open Sans','Helvetica Neue',sans-serif;  
}
html, body { height: 100%; }

h1 {  
  font-size: clamp(2.2rem,5vw,3.2rem);  
  line-height: 1.1;  
  margin: 0 0 1rem;  
  letter-spacing: .5px;  
  font-weight: 700;  
}

.hero-intro {  
  max-width: 850px;  
  font-size: 1.05rem;  
  line-height: 1.55;  
  color: #cfd6de;  
  margin-bottom: 2.25rem;  
}

.grid {  
  display: grid;  
  grid-template-columns: repeat(auto-fit,minmax(240px,1fr));  
  gap: 1.25rem;  
  margin-bottom: 2.75rem;  
}

.feature {  
  background: #2f3239;  
  border: 1px solid #3b3f47;  
  border-radius: 14px;  
  padding: 1.1rem 1.15rem 1.25rem;  
  box-shadow: 0 4px 14px -4px rgba(0,0,0,.4),0 2px 4px -1px rgba(0,0,0,.35);  
  position: relative;  
  overflow: hidden;  
}

.feature:before {  
  content: "";  
  position: absolute;  
  inset: 0;  
  background: radial-gradient(circle at 30% 20%,rgba(255,255,255,.09),transparent 60%);  
  pointer-events: none;  
}

.feature h3 {  
  margin: 0 0 .4rem;  
  font-size: 1.05rem;  
  font-weight: 600;  
  letter-spacing: .4px;  
}

.feature p {  
  margin: 0;  
  font-size: .85rem;  
  color: #b8c2cc;  
  line-height: 1.4;  
}

.section-title {  
  margin: 0 0 1rem;  
  font-size: 1.6rem;  
  font-weight: 600;  
  letter-spacing: .4px;  
}

.h5p-wrapper {  
  margin-top: .75rem;  
  background: #1d1f23;  
  border: 1px solid #353941;  
  border-radius: 16px;  
  padding: 1.1rem 1.1rem 1.4rem;  
  box-shadow: 0 4px 18px -5px rgba(0,0,0,.55);  
}

/* Fullscreen modifier (added via JS when entering fullscreen) */
.h5p-wrapper.is-fullscreen {
  border-radius: 0 !important;
  padding: 0 !important;
  margin: 0 !important;
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  max-width: none;
  width: 100vw;
  height: 100vh;
  background: #000; /* reduce distraction */
  z-index: 9999;
  overflow: hidden;
}

/* When fullscreen, also neutralize root container spacing so content truly fills */
.h5p-wrapper.is-fullscreen #root, 
body:has(.h5p-wrapper.is-fullscreen) #root { 
  padding: 0 !important;
  margin: 0 !important;
  max-width: none !important;
  width: 100% !important;
}

/* Fallback for browsers without :has selector: add a utility class via JS if needed */
.root-fullscreen-adjust { padding:0 !important; margin:0 !important; max-width:none !important; width:100% !important; }

.h5p-wrapper.is-fullscreen .h5p-container {
  max-width: none !important;
  width: 100% !important;
  height: 100% !important;
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  overflow: hidden;
}

/* Ensure inner iframe (if present) stretches fully */
.h5p-wrapper.is-fullscreen iframe,
.h5p-wrapper.is-fullscreen .h5p-iframe,
.h5p-wrapper.is-fullscreen .h5p-content {
  width: 100% !important;
  height: 100% !important;
  position: absolute !important;
  top: 0 !important;
  left: 0 !important;
  border: none !important;
  margin: 0 !important;
  padding: 0 !important;
  display: block;
}

.h5p-wrapper h2 {  
  margin: 0 0 .9rem;  
  font-size: 1.25rem;  
  font-weight: 600;  
  letter-spacing: .5px;  
}

.footer {  
  margin-top: 3rem;  
  font-size: .7rem;  
  letter-spacing: .5px;  
  text-transform: uppercase;  
  opacity: .55;  
  text-align: center;  
}

a {  
  color: #7dabff;  
}

a:hover {  
  color: #b9d6ff;  
}

/* H5P container sizing: allow responsive width & auto height */
.h5p-container {  
  width: 100%;  
  max-width: 960px;  
  margin: 0 auto;  
  box-sizing: border-box;  
}

/* Force H5P inner iframe / content to expand to container width */
.h5p-container iframe,
.h5p-container .h5p-iframe,
.h5p-container .h5p-embed,
.h5p-container .h5p-content,
.h5p-container .h5p-activity {  
  width: 100% !important;  
  max-width: 100% !important;  
  box-sizing: border-box !important;  
}

/* Make sure full-width media inside H5P scales down */
.h5p-container img, .h5p-container video {  
  max-width: 100% !important;  
  height: auto !important;  
}

/* On very large screens, allow slightly wider player */
@media (min-width: 1400px) {  
  .h5p-container { max-width: 1100px; }  
}

@media (max-width: 680px) {  
  .h5p-container { max-width: 100%; padding-left: .5rem; padding-right: .5rem; }
}

.site-nav {  
  position: static;  
  display: flex;  
  align-items: center;  
  justify-content: space-between;  
  gap: 1.5rem;  
  padding: .85rem 1.25rem;  
  background: rgba(32,34,38,.78);  
  backdrop-filter: blur(10px);  
  border-bottom: 1px solid #31353c;  
}
.site-nav .brand {  
  font-weight: 600;  
  letter-spacing: .5px;  
  font-size: 1.05rem;  
}
.site-nav ul {  
  list-style: none;  
  display: flex;  
  padding: 0;  
  margin: 0;  
  gap: 1rem;  
}
.site-nav a {  
  font-size: .85rem;  
  letter-spacing: .4px;  
  color: #cfd6de;  
}
.site-nav a:hover {  
  color: #ffffff;  
}
.theme-toggle {  
  background: #2f3239;  
  color: #d9e2ec;  
  border: 1px solid #3c4149;  
  padding: .45rem .85rem;  
  border-radius: 8px;  
  font-size: .75rem;  
  letter-spacing: .5px;  
}
.theme-toggle:hover {  
  background: #3a3f46;  
}
.skip-link {  
  position: absolute;  
  left: -999px;  
  top: auto;  
  width: 1px;  
  height: 1px;  
  overflow: hidden;  
}
.skip-link:focus {  
  position: static;  
  width: auto;  
  height: auto;  
  background: #000;  
  color: #fff;  
  padding: .5rem 1rem;  
  z-index: 1000;  
}
.h5p-header-row {  
  display: flex;  
  flex-wrap: wrap;  
  align-items: center;  
  gap: 1rem;  
  justify-content: space-between;  
}
.activity-select {  
  display: flex;  
  align-items: center;  
  gap: .5rem;  
}
.activity-label {  
  font-size: .75rem;  
  text-transform: uppercase;  
  letter-spacing: .5px;  
  opacity: .6;  
}
.activity-dropdown {  
  background: #2f3239;  
  border: 1px solid #3c4149;  
  color: #e2e8f0;  
  padding: .4rem .6rem;  
  border-radius: 6px;  
  font-size: .8rem;  
}
.activity-dropdown:focus {  
  outline: 2px solid #4c82ff;  
  outline-offset: 1px;  
}
.activity-summary {  
  margin-top: 0;  
  margin-bottom: 1rem;  
  font-size: .85rem;  
  color: #b8c2cc;  
}

/* Light theme variant */
body.theme-light {  
  background: #f5f7fb;  
  color: #1f2730;  
}
body.theme-light .site-nav {  
  background: rgba(255,255,255,.8);  
  border-bottom-color: #e2e8f0;  
}
body.theme-light .feature {  
  background: #ffffff;  
  border-color: #e1e7ef;  
}
body.theme-light .h5p-wrapper {  
  background: #ffffff;  
  border-color: #e1e7ef;  
}
body.theme-light .feature p,  
body.theme-light .hero-intro,  
body.theme-light .activity-summary {  
  color: #4a5a6a;  
}
body.theme-light a {  
  color: #2a5bd7;  
}
body.theme-light a:hover {  
  color: #1749c7;  
}
body.theme-light .theme-toggle {  
  background: #f1f5f9;  
  color: #27313a;  
  border-color: #d3dae2;  
}
body.theme-light .activity-dropdown {  
  background: #f1f5f9;  
  border-color: #cad2db;  
  color: #27313a;  
}

@media (max-width: 680px) {  
  .grid {  
    grid-template-columns: repeat(auto-fit,minmax(180px,1fr));  
  }
  .feature {  
    padding: .95rem .95rem 1.05rem;  
  }
  h1 {  
    font-size: 2.2rem;  
  }
}
@media (max-width: 760px) {  
  .site-nav ul {  
    display: none;  
  }
  .h5p-header-row {  
    flex-direction: column;  
    align-items: flex-start;  
  }
  .activity-select {  
    width: 100%;  
    justify-content: flex-start;  
  }
}
.full-bleed {
  /* allow H5P section to extend wider than root max-width on narrow screens */
  margin-left: calc(-1.5rem);
  margin-right: calc(-1.5rem);
  padding-left: 1rem;
  padding-right: 1rem;
}
@media (min-width: 900px) {
  .full-bleed {
    margin-left: auto;
    margin-right: auto;
    padding-left: 1.1rem;
    padding-right: 1.1rem;
  }
}
/* Edge-to-edge player on very small devices */
@media (max-width:560px) {
  .h5p-wrapper.full-bleed .h5p-container { 
    max-width: 100%;
    margin-left: 0;
    margin-right: 0;
  }
  #root { padding-left: 1rem; padding-right: 1rem; }
}

/* Mobile fullscreen adjustments */
@media (max-width: 800px) {
  .h5p-wrapper.is-fullscreen { 
    height: calc(var(--vh, 1vh) * 100);
    touch-action: none; /* prevent overscroll bounce */
    overscroll-behavior: contain;
    padding: env(safe-area-inset-top) env(safe-area-inset-right) env(safe-area-inset-bottom) env(safe-area-inset-left);
    /* ensure the document behind does not scroll */
    z-index: 9999;
    overflow-y: auto;
  }
  .h5p-wrapper.is-fullscreen iframe { 
    height: auto !important; 
    min-height: calc(var(--vh, 1vh) * 100);
    display: block; 
  }
}

/* Utility class to trigger a height recalculation if needed */
.force-fs-height-recalc { animation: fs-recalc 0.001s linear; }
@keyframes fs-recalc { from { opacity: 1; } to { opacity: 1; } }
/* Improve tap targets & font sizing on small phones */
@media (max-width:480px) {
  .site-nav { padding: .7rem .9rem; }
  h1 { font-size: 1.9rem; }
  .feature { padding: .85rem .85rem 1rem; }
  .h5p-wrapper { border-radius: 12px; padding: .9rem .9rem 1.1rem; }
  .h5p-wrapper h2 { font-size: 1.05rem; }
}
/* High density screens tweaks */
@media (pointer:coarse) and (max-width:680px) {
  .theme-toggle { padding: .6rem 1rem; font-size: .8rem; }
}
